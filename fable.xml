<fable>
  <!-- ConfiguraÃ§Ãµes globais -->
  <config font-family="Caveat" />
  
  <!-- VariÃ¡veis do diÃ¡logo -->
  <property name="dialogo_atual" default="0" />
  <property name="nome_jogador" default="Aventureiro" />
  <property name="dialogos" default="['OlÃ¡, $nome_jogador!', 'Bem-vindo Ã  nossa vila!', 'Precisa de ajuda com algo?', 'Que os ventos o guiem!']" />
  <property name="falando" default="true" />

  <page id="conversa" bg_image="forest-bg.png">
    <!-- CenÃ¡rio -->
    <agent id="titulo" x="300" y="30" 
           text="ðŸ˜ï¸ Conversa na Vila" 
           color="#2d4a2d" font-size="24" />
    
    <!-- Personagem NPC -->
    <agent id="npc" x="150" y="250" image="forest-hero-idle.png" 
           width="80" height="80" animation="float" />
    
    <agent id="npc-nome" x="150" y="340" text="AldeÃ£o SÃ¡bio" 
           color="#2d4a2d" font-size="14" />
    
    <!-- Sistema de diÃ¡logos -->
    <fab-if when="$dialogo_atual < $dialogos.length and $falando = 'true'">
      <!-- BalÃ£o de diÃ¡logo -->
      <agent id="balao-bg" x="300" y="180" width="350" height="80"
             text="" />
      
      <agent id="balao-texto" x="320" y="200" 
             text="$dialogos[$dialogo_atual]" 
             color="#000000" font-size="16" />
      
      <!-- BotÃ£o para continuar -->
      <agent id="continuar" x="500" y="240" text="Continuar âž¤" 
             color="#2d4a2d" font-size="14" animation="hover-grow"
             on_click="set(dialogo_atual, $dialogo_atual + 1)" />
    </fab-if>
    
    <!-- OpÃ§Ãµes de resposta (quando diÃ¡logo termina) -->
    <fab-if when="$dialogo_atual >= $dialogos.length and $falando = 'true'">
      <agent id="opcoes-titulo" x="300" y="150" 
             text="O que vocÃª quer fazer?" 
             color="#2d4a2d" font-size="18" />
      
      <agent id="opcao1" x="200" y="200" text="ðŸ›¡ï¸ Pedir missÃ£o" 
             color="#ffffff" animation="hover-grow"
             on_click="set(dialogos, ['Ã“timo!', 'HÃ¡ goblins nas montanhas...', 'Pode nos ajudar?']); set(dialogo_atual, 0)" />
      
      <agent id="opcao2" x="400" y="200" text="ðŸ›’ Visitar loja" 
             color="#ffffff" animation="hover-grow"
             on_click="goToPage('loja')" />
      
      <agent id="opcao3" x="300" y="250" text="ðŸ‘‹ Despedir-se" 
             color="#ffffff" animation="hover-grow"
             on_click="set(falando, 'false')" />
    </fab-if>
    
    <!-- Fim da conversa -->
    <fab-if when="$falando = 'false'">
      <agent id="fim-conversa" x="300" y="180" 
             text="Conversa finalizada. Boa jornada!" 
             color="#2d4a2d" font-size="18" animation="fade-in" />
      
      <agent id="reiniciar" x="300" y="220" text="ðŸ”„ Falar novamente" 
             color="#2d4a2d" animation="hover-grow"
             on_click="set(dialogo_atual, 0); set(falando, 'true')" />
    </fab-if>
    
    <!-- Contador de progresso -->
    <agent id="progresso" x="50" y="50" 
           text="DiÃ¡logo: $dialogo_atual / $dialogos.length" 
           color="#2d4a2d" font-size="12" />
  </page>
  
  <!-- PÃ¡gina adicional da loja -->
  <page id="loja" bg_color="#8b4513">
    <agent id="loja-titulo" x="300" y="100" 
           text="ðŸ›’ Bem-vindo Ã  Loja!" 
           color="#ffffff" font-size="24" />
    
    <agent id="voltar" x="300" y="400" text="â† Voltar para Vila" 
           color="#ffffff" animation="hover-grow"
           on_click="goToPage('conversa')" />
  </page>
</fable>
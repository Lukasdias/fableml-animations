<fable>
  <!-- ConfiguraÃ§Ãµes globais -->
  <config font-family="Montserrat" />

  <!-- VariÃ¡veis do sistema de escolhas -->
  <property name="escolha_feita" default="false" />
  <property name="caminho" default="" />
  <property name="vida" default="100" />
  <property name="coragem" default="50" />
  <property name="capitulo" default="1" />

  <page id="escolha" bg_color="#2c1810" bg_music="osts-fear.mp3">
    <!-- Interface do jogo -->
    <agent
      id="titulo"
      x="300"
      y="30"
      text="ðŸŒ™ A Floresta Sombria - CapÃ­tulo $capitulo"
      color="#ffffff"
      font-size="20"
    />

    <!-- Status do jogador -->
    <agent
      id="status"
      x="50"
      y="60"
      text="â¤ï¸ Vida: $vida | ðŸ›¡ï¸ Coragem: $coragem"
      color="#ffff00"
      font-size="14"
    />

    <!-- Narrativa inicial -->
    <fab-if when="not $escolha_feita">
      <agent
        id="cenario"
        x="300"
        y="120"
        width="500"
        height="100"
        text="VocÃª caminha pela floresta sombria quando encontra uma bifurcaÃ§Ã£o misteriosa. Ã€ esquerda, um caminho illuminado pela lua. Ã€ direita, um tÃºnel escuro e Ãºmido. AtrÃ¡s de vocÃª, ouve-se uivos distantes..."
        color="#cccccc"
        font-size="16"
      />

      <!-- OpÃ§Ãµes de escolha -->
      <agent
        id="esquerda"
        x="200"
        y="280"
        text="ðŸŒ™ Seguir Ã  esquerda
(Caminho da Lua)"
        color="#87ceeb"
        animation="hover-grow"
        on_click="set(escolha_feita, true); set(caminho, 'lua')"
      />

      <agent
        id="direita"
        x="400"
        y="280"
        text="ðŸ•³ï¸ Entrar no tÃºnel
(Caminho Sombrio)"
        color="#8b4513"
        animation="hover-grow"
        on_click="set(escolha_feita, true); set(caminho, 'sombra')"
      />

      <agent
        id="voltar"
        x="300"
        y="350"
        text="ðŸƒ Correr de volta
(Fugir dos uivos)"
        color="#ff6b6b"
        animation="hover-grow"
        on_click="set(escolha_feita, true); set(caminho, 'fuga')"
      />
    </fab-if>

    <!-- ConsequÃªncias: Caminho da Lua -->
    <fab-if when="$escolha_feita and $caminho = 'lua'">
      <agent
        id="resultado-lua"
        x="300"
        y="150"
        width="500"
        height="120"
        text="ðŸŒŸ VocÃª seguiu o caminho iluminado e encontrou um cristal mÃ¡gico! Sua coragem aumenta e vocÃª se sente renovado. Um druida aparece e o guia em seguranÃ§a."
        color="#e6e6fa"
        font-size="16"
        animation="fade-in"
      />

      <agent
        id="bonus-lua"
        animation="bounce-in"
        x="300"
        y="280"
        text="âœ¨ +20 Coragem | +10 Vida"
        color="#00ff00"
        font-size="18"
        on_click="set(coragem, $coragem + 20); set(vida, $vida + 10)"
      />
    </fab-if>

    <!-- ConsequÃªncias: Caminho das Sombras -->
    <fab-if when="$escolha_feita and $caminho = 'sombra'">
      <agent
        id="resultado-sombra"
        x="300"
        y="150"
        width="500"
        height="120"
        text="ðŸ’€ O tÃºnel estava cheio de armadilhas! VocÃª tropeÃ§a e se machuca, mas encontra um tesouro escondido. Sua vida diminui, mas vocÃª ganha experiÃªncia valiosa."
        color="#cd853f"
        font-size="16"
        animation="fade-in"
      />

      <agent
        id="bonus-sombra"
        x="300"
        y="280"
        text="âš”ï¸ +10 Coragem | -20 Vida"
        color="#ffa500"
        font-size="18"
        animation="bounce-in"
        on_click="set(coragem, $coragem + 10); set(vida, $vida - 20)"
      />
    </fab-if>

    <!-- ConsequÃªncias: Fuga -->
    <fab-if when="$escolha_feita and $caminho = 'fuga'">
      <agent
        id="resultado-fuga"
        x="300"
        y="150"
        width="500"
        height="120"
        text="ðŸƒ VocÃª correu de volta mas tropeÃ§ou! Os uivos se aproximam... Sua coragem diminui, mas vocÃª consegue escapar por pouco e encontra uma cabana segura."
        color="#ffa07a"
        font-size="16"
        animation="fade-in"
      />

      <agent
        id="bonus-fuga"
        x="300"
        y="280"
        text="ðŸ  Lugar Seguro | -10 Coragem"
        color="#ff4500"
        font-size="18"
        animation="bounce-in"
        on_click="set(coragem, $coragem - 10)"
      />
    </fab-if>

    <!-- BotÃµes de aÃ§Ã£o apÃ³s escolha -->
    <fab-if when="$escolha_feita">
      <agent
        id="proximo-capitulo"
        x="200"
        y="400"
        text="ðŸ“– PrÃ³ximo CapÃ­tulo"
        color="#ffffff"
        animation="hover-grow"
        on_click="set(capitulo, $capitulo + 1); set(escolha_feita, false); set(caminho, '')"
      />

      <agent
        id="reiniciar"
        x="400"
        y="400"
        text="ðŸ”„ RecomeÃ§ar HistÃ³ria"
        color="#ffffff"
        animation="hover-grow"
        on_click="set(escolha_feita, false); set(caminho, ''); set(vida, 100); set(coragem, 50); set(capitulo, 1)"
      />
    </fab-if>

    <!-- Sistema de Game Over -->
    <fab-if when="$vida <= 0">
      <agent
        id="game-over"
        x="300"
        y="250"
        text="ðŸ’€ GAME OVER
Sua jornada terminou aqui..."
        color="#ff0000"
        font-size="24"
        animation="pulse"
      />

      <agent
        id="restart"
        x="300"
        y="350"
        text="ðŸ”„ ComeÃ§ar Nova Jornada"
        color="#ffffff"
        animation="hover-grow"
        on_click="set(vida, 100); set(coragem, 50); set(capitulo, 1); set(escolha_feita, false); set(caminho, '')"
      />
    </fab-if>
  </page>
</fable>
